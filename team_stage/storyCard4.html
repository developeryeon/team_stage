<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>소개하기</title>
  <style>
    .image {
      display: flex;
      justify-content: center;
      width: 100%;
      height: 50vh;      
    }
    .images {
      border-radius: 20%;
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    .story {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
    }
  </style>
  
  <script type="module">
    // Firebase SDK 라이브러리 가져오기
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
    import { getFirestore } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import { collection, addDoc } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";
    import { getDocs } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";


    // Firebase 구성 정보 설정
    const firebaseConfig = {// For Firebase JS SDK v7.20.0 and later, measurementId is optional
      apiKey: "AIzaSyDcQ6Q78akg6Oo9Z2VO5APf-QQ7S7kn9DQ",
      authDomain: "our-stage.firebaseapp.com",
      projectId: "our-stage",
      storageBucket: "our-stage.appspot.com",
      messagingSenderId: "999213003989",
      appId: "1:999213003989:web:774432a35de3c233c69e5c",
      measurementId: "G-G2QMB19RVB"
    };


    // Firebase 인스턴스 초기화
    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);


  </script>
</head>
<body>
  <div class="image">
    <a href="index.html">
      <img class="images" src="사진.jpg" alt="이미지를 누르면 연결됩니다.">
    </a>
  </div>
  <div class="story">
    <h1>이름</h1>
    <p>자신의 소개문</p>
    <p>블로그</p>
    <p>Github</p>
  </div>
  $(document).ready(function() {
  function initComment() {
    var commentEmpty = $('div[ux-name="commentEmpty"]');
    var comment = $this.findName('comment');
    var userinfo;
    $ux.data.query({
        id: 'BMP_IDEA_VIEW.GET.COMMENT',
        version: '00001',
        parameter: {
            IDEAID: IDEAID
        },
        reply: function(e) {
            commentEmpty.html('');
            var data = e.result;
            for (var i = 0; i < data.length; i++) {
                var user = data[i].DEPARTMENT + ' ) ' + data[i].USERNAME;
                var content = data[i].CONTENT;
                var time = data[i].CREATEDTIME;
                var rid = data[i].REPLYID;
                var seq = data[i].SEQ;
                var isme;
                if (data[i].USERID == $ux.user.id()) {
                    isme = 'Y';
                } else {
                    isme = 'N';
                }
                if (data[i].SEQ == 0) {
                    commentEmpty.append(makeCommentTable(user, content, time, rid, isme));
                } else {
                    commentEmpty.append(makeReReplytable(user, rid, content, time, isme, seq));
                }

            }
            //totalCommentLabel.tool().setValue('전체 댓글 ' + $('div[ux-name="commentEmpty"] table').length + ' 건');
            if (replyCount())
                totalCommentLabel.tool().setValue('ㅤㅤ전체 댓글 ' + replyCount() + ' 건');
            else
                totalCommentLabel.tool().setValue('ㅤㅤ전체 댓글 0 건');
            /*댓글 기능*/
            $('button[btnType="reply"]').click(function(e) {
                var parentTable = this.parentElement.parentElement.parentElement.parentElement;
                var rid = parentTable.id.split('replyIdNo')[1];
                $(parentTable).after(makeReReply(user, rid));
                var length = $('div[ux-name="commentEmpty"] table').length;
                var top = 60 * length + 855;
                var orignTop = replyEmpty.tool().setTopPositionValue(top + 'px');
                //대댓글달기 취소
                $('button[btnType="reCancle"]').click(function(er) {
                    this.parentElement.parentElement.parentElement.parentElement.remove();
                    var length = $('div[ux-name="commentEmpty"] table').length;
                    var top = 60 * length + 855;
                    var orignTop = replyEmpty.tool().setTopPositionValue(top + 'px');
                });
                //대댓글 등록하기
                $('button[btnType="reCommit"]').click(function(er) {

                    var rid = this.parentElement.parentElement.parentElement.parentElement.id.split('replyIdNo')[1];
                    var content = $('#commentCommit')[0].value;
                    $ux.cjMessage.confirm('댓글을 등록하시겠습니까?', null, function() {
                        $ux.request({
                            name: 'BmpIdeaSaveReComment',
                            value: {
                                REPLYID: rid,
                                CONTENT: content,
                                IDEAID: IDEAID
                            },
                            reply: function(e) {
                                initComment();

                            }
                        });
                    });
                });
            });
          });
</body>
</html>
